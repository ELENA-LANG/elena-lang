version: 6.0.6.{build}
branches:
  only:
  - master
  - /^v\d+\.\d+\.\d+$/
image: Visual Studio 2022
configuration: Release
platform: 
- x86
- x64

after_build:
  - cmd: call install\build_package_%PLATFORM%.bat elena-lang.%APPVEYOR_BUILD_VERSION%-%PLATFORM%

build:
  verbosity: minimal
  project: elenasrc3\elenasrc3.sln 

artifacts:
  # archive the generated packages in the ci.appveyor.com build report
  - path: install\output\*.zip
    name: nightly-build

deploy:
  appveyor_repo_tag: true
  tag: $(APPVEYOR_REPO_TAG_NAME)
  release: $(APPVEYOR_REPO_TAG_NAME)
  description: 'ELENA Nightly Build'
  provider: GitHub
  auth_token:
    secure: znFqEeEkeb1s0OK4PAPT4KrYnCJowIxxWzRq3apGne3bSH1XFsz9U+E1JAgpCwwF
  artifact: nightly-build
  draft: false
  prerelease: true
  on:
    appveyor_repo_tag: true
