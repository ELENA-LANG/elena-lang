number            ::= $numeric;

numeric           ::= "(" sub_expr;
numeric           ::= number;
factor            ::= number factor_r;
factor            ::= "(" sub_expr;

sum               ::= "+" factor ;
difference        ::= "-" factor ;
multiply          ::= "*" numeric;
divide            ::= "/" numeric;

factor_r          ::= multiply factor_r;
factor_r          ::= divide factor_r;
factor_r          ::= $eps;

expr_r            ::= sum expr_r;
expr_r            ::= difference expr_r;
expr_r            ::= $eps;

neg_r             ::= factor_r expr_r;

sub_expr          ::= expression sub_expr_r;
sub_expr_r        ::= ")" factor_r;

neg_expression    ::= $numeric neg_r;

expression        ::= factor expr_r;
expression        ::= "-" neg_expression;

print             ::= "?" expression;

start             ::= print;

print             => &nil 'program'output $body ^write;

multiply          => $body ^multiply;
divide            => $body ^divide;
sum               => $body ^add;
difference        => $body ^subtract;

neg_expression    => 0 $terminal ^subtract $body;

number            => $terminal $body;
