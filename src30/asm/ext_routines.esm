define NEW_MESSAGE_ID       084000000h

procedure inline'rnd_init

  bcopya
  lrndnew
  acopyb

  quitn 1

end

procedure inline'rnd_next

  bcopya

  aloadsi 2
  nload
  aloadsi 3
  lrndnext  
  acopyb

  quitn 3

end

procedure inline'evaluate

  aloadsi 2
  pusha
  callextr extern : 'dlls'elenasm.EvaluateScript
  pop
  ifn labErr 0
  quitn 2

labErr:
  callr extensions'dynamic'ScriptEngineException
  pusha
  copym NEW_MESSAGE_ID
  acallvi 0
  throw
  
end